import{z as B}from"./zh-cn-fdcbec76.js";import{d as R,u as U,j as g,k as j,l as k,r as c,o as v,c as x,i as q,e,w as p,n as m,f as h,h as A,x as D,_ as E}from"./index-b95edb8d.js";const L={class:"Returnbook"},M={class:"Returnbook_search"},O={key:0,class:"Returnbook_page"},P=R({__name:"index",setup(T){const a=U(),b=g(),d=g(""),u=g(),t=g({pageNo:1,pageNumber:6,user_number:""});j(()=>{a.dispatch("returnbook",t),f()});const f=async()=>{let n=await k.get("http://localhost/booksy/bookreturntotal.php",{params:{account:a.state.userLocalCache}});b.value=n.data},w=n=>{t.value.user_number=u,t.value.pageNumber=n,a.dispatch("returnbook",t)},y=n=>{t.value.user_number=u.value,t.value.pageNo=n,a.dispatch("returnbook",t)},C=async(n,l)=>{let i=await k.post("http://localhost/booksy/finduserreturnaccount.php",D.stringify({returnaccount:n})),s=[];if(d.value=i.data,d.value!=null)for(let r=0;r<i.data.length;r++)s.indexOf(i.data[r].bookreturn_number)===-1&&s.push(i.data[r].bookreturn_number);let o=s.map(r=>({value:r}));l(o)},N=()=>{t.value.user_number=u,d.value==null?b.value=0:b.value=d.value.length,a.dispatch("returnbook",t)},z=()=>{d.value="",u.value="",a.dispatch("returnbook",t),f()};return(n,l)=>{const i=c("el-autocomplete"),s=c("el-button"),o=c("el-table-column"),r=c("el-table"),V=c("el-scrollbar"),I=c("el-pagination"),S=c("el-config-provider");return v(),x("div",L,[q("div",M,[e(i,{modelValue:u.value,"onUpdate:modelValue":l[0]||(l[0]=_=>u.value=_),"fetch-suggestions":C,clearable:"",class:"inline-input w-50","trigger-on-focus":!1,placeholder:"请输入账号"},null,8,["modelValue"]),e(s,{onClick:N,disabled:!u.value},{default:p(()=>[m("搜索")]),_:1},8,["disabled"]),e(s,{onClick:z},{default:p(()=>[m("重置")]),_:1})]),e(V,{height:"50vh"},{default:p(()=>[e(r,{data:h(a).state.bookreturnkInfo,border:"",style:{width:"100%"},"row-style":{height:"60px"},"empty-text":"暂无归还记录"},{default:p(()=>[e(o,{prop:"bookreturn_number",label:"账号",width:"140",align:"center"}),e(o,{prop:"bookreturn_type",label:"书籍类型",align:"center",width:"140"}),e(o,{prop:"bookreturn_AuthorName",label:"作者",width:"180",align:"center"}),e(o,{prop:"bookreturn_press",label:"出版社",align:"center",width:"140"}),e(o,{prop:"bookreturn_name",label:"书籍名字",align:"center"}),e(o,{prop:"bookreturn_isbn",width:"140",label:"ISBN",align:"center"}),e(o,{prop:"bookreturn_time",sortable:"",width:"180",label:"还书时间",align:"center"}),e(o,{label:"状态",align:"center",width:"100"},{default:p(()=>[e(s,{type:"success",text:"已归还"},{default:p(()=>[m("已归还")]),_:1})]),_:1})]),_:1},8,["data"])]),_:1}),h(a).state.bookreturnkInfo?(v(),x("div",O,[e(S,{locale:h(B)},{default:p(()=>[e(I,{background:"","current-page":t.value.pageNo,"onUpdate:currentPage":l[1]||(l[1]=_=>t.value.pageNo=_),"page-size":t.value.pageNumber,"onUpdate:pageSize":l[2]||(l[2]=_=>t.value.pageNumber=_),"page-sizes":[6,12],layout:"total, sizes, prev, pager, next, jumper",total:b.value,onSizeChange:w,onCurrentChange:y},null,8,["current-page","page-size","total"])]),_:1},8,["locale"])])):A("",!0)])}}});const H=E(P,[["__scopeId","data-v-5fcca8a1"]]);export{H as default};
