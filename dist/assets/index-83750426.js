import{E as x}from"./wangEditor-aa7c5af9.js";import{_ as h,a as N,j as c,r as n,o as b,c as w,e as t,w as a,n as E,E as i,l as V}from"./index-b95edb8d.js";const k={class:"Notice"},C={__name:"index",setup(B){let p=N();const _=c(null),e=c({title:"",content:""}),u=c(),d=()=>{e.value.content=_.value.getHtml()},m=async()=>{if(await u.value.validate(),e.value.content=="")i({type:"error",message:"内容不能为空"});else try{let o=await V.get("http://localhost/booksy/ReleaseNotice.php",{params:{Notice_title:e.value.title,Notice_content:e.value.content}});o.status==200&&(o.data=="yes"?(i({type:"success",message:"发布成功"}),p.push({path:"/index"})):i({type:"error",message:"发布失败"}))}catch{}},f={title:[{validator:(o,l,s)=>{/^.{1,10}$/.test(l)?s():l==""?s("标题不能为空"):s("标题为10个字以下")},trigger:"change"}]};return(o,l)=>{const s=n("el-input"),r=n("el-form-item"),v=n("el-button"),y=n("el-form");return b(),w("div",k,[t(y,{model:e.value,rules:f,ref_key:"Noiteform",ref:u},{default:a(()=>[t(r,{label:"标题",style:{width:"400px"},prop:"title"},{default:a(()=>[t(s,{modelValue:e.value.title,"onUpdate:modelValue":l[0]||(l[0]=g=>e.value.title=g)},null,8,["modelValue"])]),_:1}),t(r,{label:"内容",prop:"content"},{default:a(()=>[t(x,{onKeyup:d,ref_key:"children",ref:_},null,512)]),_:1}),t(v,{class:"release",type:"success",onClick:m},{default:a(()=>[E("发布")]),_:1})]),_:1},8,["model"])])}}},A=h(C,[["__scopeId","data-v-f53bf041"]]);export{A as default};
